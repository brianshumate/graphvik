!function(){function n(n){for(var e=0,t=0;;){if(n(e,t))return[e,t];0===e?(e=t+1,t=0):(e-=1,t+=1)}}function e(n,e,t,r){var i,l,a,o,u,f,c;return i=r[n],l=i[0],a=i[1],i=r[e],o=i[0],u=i[1],i=r[t],f=i[0],c=i[1],(c-a)*(o-l)-(u-a)*(f-l)>0}function t(n,e,t){return(t[0]-e[0])*(n[1]-e[1])<(t[1]-e[1])*(n[0]-e[0])}function r(n,e,t,r){var i=n[0],l=e[0],a=t[0],o=r[0],u=n[1],f=e[1],c=t[1],g=r[1],d=i-a,s=l-i,h=o-a,x=u-c,y=f-u,v=g-c,p=(h*x-v*d)/(v*s-h*y);return[i+p*s,u+p*y]}function i(n,e){var t={list:n.map(function(n,e){return{index:e,x:n[0],y:n[1]}}).sort(function(n,e){return n.y<e.y?-1:n.y>e.y?1:n.x<e.x?-1:n.x>e.x?1:0}),bottomSite:null},r={list:[],leftEnd:null,rightEnd:null,init:function(){r.leftEnd=r.createHalfEdge(null,"l"),r.rightEnd=r.createHalfEdge(null,"l"),r.leftEnd.r=r.rightEnd,r.rightEnd.l=r.leftEnd,r.list.unshift(r.leftEnd,r.rightEnd)},createHalfEdge:function(n,e){return{edge:n,side:e,vertex:null,l:null,r:null}},insert:function(n,e){e.l=n,e.r=n.r,n.r.l=e,n.r=e},leftBound:function(n){var e=r.leftEnd;do e=e.r;while(e!=r.rightEnd&&i.rightOf(e,n));return e=e.l},del:function(n){n.l.r=n.r,n.r.l=n.l,n.edge=null},right:function(n){return n.r},left:function(n){return n.l},leftRegion:function(n){return null==n.edge?t.bottomSite:n.edge.region[n.side]},rightRegion:function(n){return null==n.edge?t.bottomSite:n.edge.region[c[n.side]]}},i={bisect:function(n,e){var t={region:{l:n,r:e},ep:{l:null,r:null}},r=e.x-n.x,i=e.y-n.y,l=r>0?r:-r,a=i>0?i:-i;return t.c=n.x*r+n.y*i+.5*(r*r+i*i),l>a?(t.a=1,t.b=i/r,t.c/=r):(t.b=1,t.a=r/i,t.c/=i),t},intersect:function(n,e){var t=n.edge,r=e.edge;if(!t||!r||t.region.r==r.region.r)return null;var i=t.a*r.b-t.b*r.a;if(Math.abs(i)<1e-10)return null;var l,a,o=(t.c*r.b-r.c*t.b)/i,u=(r.c*t.a-t.c*r.a)/i,f=t.region.r,c=r.region.r;f.y<c.y||f.y==c.y&&f.x<c.x?(l=n,a=t):(l=e,a=r);var g=o>=a.region.r.x;return g&&"l"===l.side||!g&&"r"===l.side?null:{x:o,y:u}},rightOf:function(n,e){var t=n.edge,r=t.region.r,i=e.x>r.x;if(i&&"l"===n.side)return 1;if(!i&&"r"===n.side)return 0;if(1===t.a){var l=e.y-r.y,a=e.x-r.x,o=0,u=0;if(!i&&t.b<0||i&&t.b>=0?u=o=l>=t.b*a:(u=e.x+e.y*t.b>t.c,t.b<0&&(u=!u),u||(o=1)),!o){var f=r.x-t.region.l.x;u=t.b*(a*a-l*l)<f*l*(1+2*a/f+t.b*t.b),t.b<0&&(u=!u)}}else{var c=t.c-t.a*e.x,g=e.y-c,d=e.x-r.x,s=c-r.y;u=g*g>d*d+s*s}return"l"===n.side?u:!u},endPoint:function(n,t,r){n.ep[t]=r,n.ep[c[t]]&&e(n)},distance:function(n,e){var t=n.x-e.x,r=n.y-e.y;return Math.sqrt(t*t+r*r)}},l={list:[],insert:function(n,e,t){n.vertex=e,n.ystar=e.y+t;for(var r=0,i=l.list,a=i.length;a>r;r++){var o=i[r];if(!(n.ystar>o.ystar||n.ystar==o.ystar&&e.x>o.vertex.x))break}i.splice(r,0,n)},del:function(n){for(var e=0,t=l.list,r=t.length;r>e&&t[e]!=n;++e);t.splice(e,1)},empty:function(){return 0===l.list.length},nextEvent:function(n){for(var e=0,t=l.list,r=t.length;r>e;++e)if(t[e]==n)return t[e+1];return null},min:function(){var n=l.list[0];return{x:n.vertex.x,y:n.ystar}},extractMin:function(){return l.list.shift()}};r.init(),t.bottomSite=t.list.shift();for(var a,o,u,f,g,d,s,h,x,y,v,p,b,m=t.list.shift();;)if(l.empty()||(a=l.min()),m&&(l.empty()||m.y<a.y||m.y==a.y&&m.x<a.x))o=r.leftBound(m),u=r.right(o),s=r.rightRegion(o),p=i.bisect(s,m),d=r.createHalfEdge(p,"l"),r.insert(o,d),y=i.intersect(o,d),y&&(l.del(o),l.insert(o,y,i.distance(y,m))),o=d,d=r.createHalfEdge(p,"r"),r.insert(o,d),y=i.intersect(d,u),y&&l.insert(d,y,i.distance(y,m)),m=t.list.shift();else{if(l.empty())break;o=l.extractMin(),f=r.left(o),u=r.right(o),g=r.right(u),s=r.leftRegion(o),h=r.rightRegion(u),v=o.vertex,i.endPoint(o.edge,o.side,v),i.endPoint(u.edge,u.side,v),r.del(o),l.del(u),r.del(u),b="l",s.y>h.y&&(x=s,s=h,h=x,b="r"),p=i.bisect(s,h),d=r.createHalfEdge(p,b),r.insert(f,d),i.endPoint(p,c[b],v),y=i.intersect(f,d),y&&(l.del(f),l.insert(f,y,i.distance(y,s))),y=i.intersect(d,g),y&&l.insert(d,y,i.distance(y,s))}for(o=r.right(r.leftEnd);o!=r.rightEnd;o=r.right(o))e(o.edge)}function l(){return{leaf:!0,nodes:[],point:null}}function a(n,e,t,r,i,l){if(!n(e,t,r,i,l)){var o=.5*(t+i),u=.5*(r+l),f=e.nodes;f[0]&&a(n,f[0],t,r,o,u),f[1]&&a(n,f[1],o,r,i,u),f[2]&&a(n,f[2],t,u,o,l),f[3]&&a(n,f[3],o,u,i,l)}}function o(n){return{x:n[0],y:n[1]}}d3.geom={},d3.geom.contour=function(e,t){var r=t||n(e),i=[],l=r[0],a=r[1],o=0,c=0,g=NaN,d=NaN,s=0;do s=0,e(l-1,a-1)&&(s+=1),e(l,a-1)&&(s+=2),e(l-1,a)&&(s+=4),e(l,a)&&(s+=8),6===s?(o=-1===d?-1:1,c=0):9===s?(o=0,c=1===g?-1:1):(o=u[s],c=f[s]),o!=g&&c!=d&&(i.push([l,a]),g=o,d=c),l+=o,a+=c;while(r[0]!=l||r[1]!=a);return i};var u=[1,0,1,1,-1,0,-1,1,0,0,0,0,-1,0,-1,NaN],f=[0,-1,0,0,0,-1,0,0,1,-1,1,1,0,-1,0,NaN];d3.geom.hull=function(n){if(n.length<3)return[];var t,r,i,l,a,o,u,f,c,g,d=n.length,s=d-1,h=[],x=[],y=0;for(t=1;d>t;++t)n[t][1]<n[y][1]?y=t:n[t][1]==n[y][1]&&(y=n[t][0]<n[y][0]?t:y);for(t=0;d>t;++t)t!==y&&(l=n[t][1]-n[y][1],i=n[t][0]-n[y][0],h.push({angle:Math.atan2(l,i),index:t}));for(h.sort(function(n,e){return n.angle-e.angle}),c=h[0].angle,f=h[0].index,u=0,t=1;s>t;++t)r=h[t].index,c==h[t].angle?(i=n[f][0]-n[y][0],l=n[f][1]-n[y][1],a=n[r][0]-n[y][0],o=n[r][1]-n[y][1],i*i+l*l>=a*a+o*o?h[t].index=-1:(h[u].index=-1,c=h[t].angle,u=t,f=r)):(c=h[t].angle,u=t,f=r);for(x.push(y),t=0,r=0;2>t;++r)-1!==h[r].index&&(x.push(h[r].index),t++);for(g=x.length;s>r;++r)if(-1!==h[r].index){for(;!e(x[g-2],x[g-1],h[r].index,n);)--g;x[g++]=h[r].index}var v=[];for(t=0;g>t;++t)v.push(n[x[t]]);return v},d3.geom.polygon=function(n){return n.area=function(){for(var e=0,t=n.length,r=n[t-1][0]*n[0][1],i=n[t-1][1]*n[0][0];++e<t;)r+=n[e-1][0]*n[e][1],i+=n[e-1][1]*n[e][0];return.5*(i-r)},n.centroid=function(e){var t,r,i,l=-1,a=n.length-1,o=0,u=0;for(arguments.length||(e=1/(6*n.area()));++l<a;)t=n[l],r=n[l+1],i=t[0]*r[1]-r[0]*t[1],o+=(t[0]+r[0])*i,u+=(t[1]+r[1])*i;return[o*e,u*e]},n.clip=function(e){for(var i,l,a,o,u,f,c=-1,g=n.length,d=n[g-1];++c<g;){for(i=e.slice(),e.length=0,o=n[c],u=i[(a=i.length)-1],l=-1;++l<a;)f=i[l],t(f,d,o)?(t(u,d,o)||e.push(r(u,f,d,o)),e.push(f)):t(u,d,o)&&e.push(r(u,f,d,o)),u=f;d=o}return e},n},d3.geom.voronoi=function(n){var e=n.map(function(){return[]});return i(n,function(n){var t,r,i,l,a,o;1===n.a&&n.b>=0?(t=n.ep.r,r=n.ep.l):(t=n.ep.l,r=n.ep.r),1===n.a?(a=t?t.y:-1e6,i=n.c-n.b*a,o=r?r.y:1e6,l=n.c-n.b*o):(i=t?t.x:-1e6,a=n.c-n.a*i,l=r?r.x:1e6,o=n.c-n.a*l);var u=[i,a],f=[l,o];e[n.region.l.index].push(u,f),e[n.region.r.index].push(u,f)}),e.map(function(e,t){var r=n[t][0],i=n[t][1];return e.forEach(function(n){n.angle=Math.atan2(n[0]-r,n[1]-i)}),e.sort(function(n,e){return n.angle-e.angle}).filter(function(n,t){return!t||n.angle-e[t-1].angle>1e-10})})};var c={l:"r",r:"l"};d3.geom.delaunay=function(n){var e=n.map(function(){return[]}),t=[];return i(n,function(t){e[t.region.l.index].push(n[t.region.r.index])}),e.forEach(function(e,r){var i=n[r],l=i[0],a=i[1];e.forEach(function(n){n.angle=Math.atan2(n[0]-l,n[1]-a)}),e.sort(function(n,e){return n.angle-e.angle});for(var o=0,u=e.length-1;u>o;o++)t.push([i,e[o],e[o+1]])}),t},d3.geom.quadtree=function(n,e,t,r,i){function u(n,e,t,r,i,l){if(!isNaN(e.x)&&!isNaN(e.y))if(n.leaf){var a=n.point;a?Math.abs(a.x-e.x)+Math.abs(a.y-e.y)<.01?f(n,e,t,r,i,l):(n.point=null,f(n,a,t,r,i,l),f(n,e,t,r,i,l)):n.point=e}else f(n,e,t,r,i,l)}function f(n,e,t,r,i,a){var o=.5*(t+i),f=.5*(r+a),c=e.x>=o,g=e.y>=f,d=(g<<1)+c;n.leaf=!1,n=n.nodes[d]||(n.nodes[d]=l()),c?t=o:i=o,g?r=f:a=f,u(n,e,t,r,i,a)}var c,g=-1,d=n.length;if(d&&isNaN(n[0].x)&&(n=n.map(o)),arguments.length<5)if(3===arguments.length)i=r=t,t=e;else{for(e=t=1/0,r=i=-(1/0);++g<d;)c=n[g],c.x<e&&(e=c.x),c.y<t&&(t=c.y),c.x>r&&(r=c.x),c.y>i&&(i=c.y);var s=r-e,h=i-t;s>h?i=t+s:r=e+h}var x=l();return x.add=function(n){u(x,n,e,t,r,i)},x.visit=function(n){a(n,x,e,t,r,i)},n.forEach(x.add),x}}();