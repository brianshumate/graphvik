!function(){function t(t){return t.y}function r(t){return t.x}function n(t,r){var n=r.length-1;return r=r.slice().sort(d3.ascending),d3.range(t).map(function(a){return r[~~(a*n/t)]})}function a(t){return t[1]}function e(t){return t[0]}function i(t){var r=t(0);return function(n){return Math.abs(t(n)-r)}}function o(t){return function(r){return"translate("+t(r)+",0)"}}function u(t){return t.measures}function s(t){return t.markers}function c(t){return t.ranges}function l(t){return[d3.quantile(t,.25),d3.quantile(t,.5),d3.quantile(t,.75)]}function d(t){return[0,t.length-1]}d3.chart={},d3.chart.box=function(){function t(t){t.each(function(t,c){t=t.map(i).sort(d3.ascending);var l=d3.select(this),d=t.length,g=t[0],h=t[d-1],y=t.quartiles=u(t),f=o&&o.call(this,t,c),m=f&&f.map(function(r){return t[r]}),p=f?d3.range(0,f[0]).concat(d3.range(f[1]+1,d)):d3.range(d),x=d3.scale.linear().domain(e&&e.call(this,t,c)||[g,h]).range([n,0]),v=this.__chart__||d3.scale.linear().domain([0,1/0]).range(x.range());this.__chart__=x;var _=l.selectAll("line.center").data(m?[m]:[]);_.enter().insert("svg:line","rect").attr("class","center").attr("x1",r/2).attr("y1",function(t){return v(t[0])}).attr("x2",r/2).attr("y2",function(t){return v(t[1])}).style("opacity",1e-6).transition().duration(a).style("opacity",1).attr("y1",function(t){return x(t[0])}).attr("y2",function(t){return x(t[1])}),_.transition().duration(a).style("opacity",1).attr("y1",function(t){return x(t[0])}).attr("y2",function(t){return x(t[1])}),_.exit().transition().duration(a).style("opacity",1e-6).attr("y1",function(t){return x(t[0])}).attr("y2",function(t){return x(t[1])}).remove();var k=l.selectAll("rect.box").data([y]);k.enter().append("svg:rect").attr("class","box").attr("x",0).attr("y",function(t){return v(t[2])}).attr("width",r).attr("height",function(t){return v(t[0])-v(t[2])}).transition().duration(a).attr("y",function(t){return x(t[2])}).attr("height",function(t){return x(t[0])-x(t[2])}),k.transition().duration(a).attr("y",function(t){return x(t[2])}).attr("height",function(t){return x(t[0])-x(t[2])});var w=l.selectAll("line.median").data([y[1]]);w.enter().append("svg:line").attr("class","median").attr("x1",0).attr("y1",v).attr("x2",r).attr("y2",v).transition().duration(a).attr("y1",x).attr("y2",x),w.transition().duration(a).attr("y1",x).attr("y2",x);var A=l.selectAll("line.whisker").data(m||[]);A.enter().insert("svg:line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",v).attr("x2",r).attr("y2",v).style("opacity",1e-6).transition().duration(a).attr("y1",x).attr("y2",x).style("opacity",1),A.transition().duration(a).attr("y1",x).attr("y2",x).style("opacity",1),A.exit().transition().duration(a).attr("y1",x).attr("y2",x).style("opacity",1e-6).remove();var b=l.selectAll("circle.outlier").data(p,Number);b.enter().insert("svg:circle","text").attr("class","outlier").attr("r",5).attr("cx",r/2).attr("cy",function(r){return v(t[r])}).style("opacity",1e-6).transition().duration(a).attr("cy",function(r){return x(t[r])}).style("opacity",1),b.transition().duration(a).attr("cy",function(r){return x(t[r])}).style("opacity",1),b.exit().transition().duration(a).attr("cy",function(r){return x(t[r])}).style("opacity",1e-6).remove();var q=s||x.tickFormat(8),F=l.selectAll("text.box").data(y);F.enter().append("svg:text").attr("class","box").attr("dy",".3em").attr("dx",function(t,r){return 1&r?6:-6}).attr("x",function(t,n){return 1&n?r:0}).attr("y",v).attr("text-anchor",function(t,r){return 1&r?"start":"end"}).text(q).transition().duration(a).attr("y",x),F.transition().duration(a).text(q).attr("y",x);var z=l.selectAll("text.whisker").data(m||[]);z.enter().append("svg:text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",r).attr("y",v).text(q).style("opacity",1e-6).transition().duration(a).attr("y",x).style("opacity",1),z.transition().duration(a).text(q).attr("y",x).style("opacity",1),z.exit().transition().duration(a).attr("y",x).style("opacity",1e-6).remove()}),d3.timer.flush()}var r=1,n=1,a=0,e=null,i=Number,o=d,u=l,s=null;return t.width=function(n){return arguments.length?(r=n,t):r},t.height=function(r){return arguments.length?(n=r,t):n},t.tickFormat=function(r){return arguments.length?(s=r,t):s},t.duration=function(r){return arguments.length?(a=r,t):a},t.domain=function(r){return arguments.length?(e=null==r?r:d3.functor(r),t):e},t.value=function(r){return arguments.length?(i=r,t):i},t.whiskers=function(r){return arguments.length?(o=r,t):o},t.quartiles=function(r){return arguments.length?(u=r,t):u},t},d3.chart.bullet=function(){function t(t){t.each(function(t,r){var u=e.call(this,t,r).slice().sort(d3.descending),s=l.call(this,t,r).slice().sort(d3.descending),c=d.call(this,t,r).slice().sort(d3.descending),f=d3.select(this),m=d3.scale.linear().domain([0,Math.max(u[0],s[0],c[0])]).range(n?[g,0]:[0,g]),p=this.__chart__||d3.scale.linear().domain([0,1/0]).range(m.range());this.__chart__=m;var x=i(p),v=i(m),_=f.selectAll("rect.range").data(u);_.enter().append("svg:rect").attr("class",function(t,r){return"range s"+r}).attr("width",x).attr("height",h).attr("x",n?p:0).transition().duration(a).attr("width",v).attr("x",n?m:0),_.transition().duration(a).attr("x",n?m:0).attr("width",v).attr("height",h);var k=f.selectAll("rect.measure").data(c);k.enter().append("svg:rect").attr("class",function(t,r){return"measure s"+r}).attr("width",x).attr("height",h/3).attr("x",n?p:0).attr("y",h/3).transition().duration(a).attr("width",v).attr("x",n?m:0),k.transition().duration(a).attr("width",v).attr("height",h/3).attr("x",n?m:0).attr("y",h/3);var w=f.selectAll("line.marker").data(s);w.enter().append("svg:line").attr("class","marker").attr("x1",p).attr("x2",p).attr("y1",h/6).attr("y2",5*h/6).transition().duration(a).attr("x1",m).attr("x2",m),w.transition().duration(a).attr("x1",m).attr("x2",m).attr("y1",h/6).attr("y2",5*h/6);var A=y||m.tickFormat(8),b=f.selectAll("g.tick").data(m.ticks(8),function(t){return this.textContent||A(t)}),q=b.enter().append("svg:g").attr("class","tick").attr("transform",o(p)).style("opacity",1e-6);q.append("svg:line").attr("y1",h).attr("y2",7*h/6),q.append("svg:text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*h/6).text(A),q.transition().duration(a).attr("transform",o(m)).style("opacity",1);var F=b.transition().duration(a).attr("transform",o(m)).style("opacity",1);F.select("line").attr("y1",h).attr("y2",7*h/6),F.select("text").attr("y",7*h/6),b.exit().transition().duration(a).attr("transform",o(m)).style("opacity",1e-6).remove()}),d3.timer.flush()}var r="left",n=!1,a=0,e=c,l=s,d=u,g=380,h=30,y=null;return t.orient=function(a){return arguments.length?(r=a,n="right"==r||"bottom"==r,t):r},t.ranges=function(r){return arguments.length?(e=r,t):e},t.markers=function(r){return arguments.length?(l=r,t):l},t.measures=function(r){return arguments.length?(d=r,t):d},t.width=function(r){return arguments.length?(g=r,t):g},t.height=function(r){return arguments.length?(h=r,t):h},t.tickFormat=function(r){return arguments.length?(y=r,t):y},t.duration=function(r){return arguments.length?(a=r,t):a},t},d3.chart.horizon=function(){function t(t){t.each(function(t,a){var e,y,f,m=d3.select(this),p=1/0,x=-(1/0),v=-(1/0),_=t.map(function(t,r){var n=o.call(this,t,r),a=u.call(this,t,r);return p>n&&(p=n),n>x&&(x=n),-a>v&&(v=-a),a>v&&(v=a),[n,a]}),k=d3.scale.linear().domain([p,x]).range([0,s]),w=d3.scale.linear().domain([0,v]).range([0,c*r]);this.__chart__?(e=this.__chart__.x,y=this.__chart__.y,f=this.__chart__.id):(e=d3.scale.linear().domain([0,1/0]).range(k.range()),y=d3.scale.linear().domain([0,1/0]).range(w.range()),f=++h);var A=m.selectAll("defs").data([_]),b=A.enter().append("svg:defs");b.append("svg:clipPath").attr("id","d3_chart_horizon_clip"+f).append("svg:rect").attr("width",s).attr("height",c),A.select("rect").transition().duration(l).attr("width",s).attr("height",c),b.append("svg:path").attr("id","d3_chart_horizon_path"+f).attr("d",g.interpolate(i).x(function(t){return e(t[0])}).y0(c*r).y1(function(t){return c*r-y(t[1])})).transition().duration(l).attr("d",g.x(function(t){return k(t[0])}).y1(function(t){return c*r-w(t[1])})),A.select("path").transition().duration(l).attr("d",g),m.selectAll("g").data([null]).enter().append("svg:g").attr("clip-path","url(#d3_chart_horizon_clip"+f+")");var q="offset"==n?function(t){return"translate(0,"+(t+(0>t)-r)*c+")"}:function(t){return(0>t?"scale(1,-1)":"")+"translate(0,"+(t-r)*c+")"},F=m.select("g").selectAll("use").data(d3.range(-1,-r-1,-1).concat(d3.range(1,r+1)),Number);F.enter().append("svg:use").attr("xlink:href","#d3_chart_horizon_path"+f).attr("transform",function(t){return q(t+(t>0?1:-1))}).style("fill",d).transition().duration(l).attr("transform",q),F.transition().duration(l).attr("transform",q).style("fill",d),F.exit().transition().duration(l).attr("transform",q).remove(),this.__chart__={x:k,y:w,id:f}}),d3.timer.flush()}var r=1,n="offset",i="linear",o=e,u=a,s=960,c=40,l=0,d=d3.scale.linear().domain([-1,0,1]).range(["#d62728","#fff","#1f77b4"]);return t.duration=function(r){return arguments.length?(l=+r,t):l},t.bands=function(n){return arguments.length?(r=+n,d.domain([-r,0,r]),t):r},t.mode=function(r){return arguments.length?(n=r+"",t):n},t.colors=function(r){return arguments.length?(d.range(r),t):d.range()},t.interpolate=function(r){return arguments.length?(i=r+"",t):i},t.x=function(r){return arguments.length?(o=r,t):o},t.y=function(r){return arguments.length?(u=r,t):u},t.width=function(r){return arguments.length?(s=+r,t):s},t.height=function(r){return arguments.length?(c=+r,t):c},t};var g=d3.svg.area(),h=0;d3.chart.qq=function(){function a(t){t.each(function(t,r){var a,g,h=d3.select(this),y=n(c,l.call(this,t,r)),f=n(c,d.call(this,t,r)),m=u&&u.call(this,t,r)||[d3.min(y),d3.max(y)],p=u&&u.call(this,t,r)||[d3.min(f),d3.max(f)],x=d3.scale.linear().domain(m).range([0,e]),v=d3.scale.linear().domain(p).range([i,0]);this.__chart__?(a=this.__chart__.x,g=this.__chart__.y):(a=d3.scale.linear().domain([0,1/0]).range(x.range()),g=d3.scale.linear().domain([0,1/0]).range(v.range())),this.__chart__={x:x,y:v};var _=h.selectAll("line.diagonal").data([null]);_.enter().append("svg:line").attr("class","diagonal").attr("x1",x(p[0])).attr("y1",v(m[0])).attr("x2",x(p[1])).attr("y2",v(m[1])),_.transition().duration(o).attr("x1",x(p[0])).attr("y1",v(m[0])).attr("x2",x(p[1])).attr("y2",v(m[1]));var k=h.selectAll("circle").data(d3.range(c).map(function(t){return{x:y[t],y:f[t]}}));k.enter().append("svg:circle").attr("class","quantile").attr("r",4.5).attr("cx",function(t){return a(t.x)}).attr("cy",function(t){return g(t.y)}).style("opacity",1e-6).transition().duration(o).attr("cx",function(t){return x(t.x)}).attr("cy",function(t){return v(t.y)}).style("opacity",1),k.transition().duration(o).attr("cx",function(t){return x(t.x)}).attr("cy",function(t){return v(t.y)}).style("opacity",1),k.exit().transition().duration(o).attr("cx",function(t){return x(t.x)}).attr("cy",function(t){return v(t.y)}).style("opacity",1e-6).remove();var w=s||x.tickFormat(4),A=s||v.tickFormat(4),b=function(t){return"translate("+x(t)+","+i+")"},q=function(t){return"translate(0,"+v(t)+")"},F=h.selectAll("g.x.tick").data(x.ticks(4),function(t){return this.textContent||w(t)}),z=F.enter().append("svg:g").attr("class","x tick").attr("transform",function(t){return"translate("+a(t)+","+i+")"}).style("opacity",1e-6);z.append("svg:line").attr("y1",0).attr("y2",-6),z.append("svg:text").attr("text-anchor","middle").attr("dy","1em").text(w),z.transition().duration(o).attr("transform",b).style("opacity",1),F.transition().duration(o).attr("transform",b).style("opacity",1),F.exit().transition().duration(o).attr("transform",b).style("opacity",1e-6).remove();var C=h.selectAll("g.y.tick").data(v.ticks(4),function(t){return this.textContent||A(t)}),N=C.enter().append("svg:g").attr("class","y tick").attr("transform",function(t){return"translate(0,"+g(t)+")"}).style("opacity",1e-6);N.append("svg:line").attr("x1",0).attr("x2",6),N.append("svg:text").attr("text-anchor","end").attr("dx","-.5em").attr("dy",".3em").text(A),N.transition().duration(o).attr("transform",q).style("opacity",1),C.transition().duration(o).attr("transform",q).style("opacity",1),C.exit().transition().duration(o).attr("transform",q).style("opacity",1e-6).remove()})}var e=1,i=1,o=0,u=null,s=null,c=100,l=r,d=t;return a.width=function(t){return arguments.length?(e=t,a):e},a.height=function(t){return arguments.length?(i=t,a):i},a.duration=function(t){return arguments.length?(o=t,a):o},a.domain=function(t){return arguments.length?(u=null==t?t:d3.functor(t),a):u},a.count=function(t){return arguments.length?(c=t,a):c},a.x=function(t){return arguments.length?(l=t,a):l},a.y=function(t){return arguments.length?(d=t,a):d},a.tickFormat=function(t){return arguments.length?(s=t,a):s},a}}();