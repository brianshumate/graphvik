!function(){function t(t){return[0,t.length-1]}function r(t){return[d3.quantile(t,.25),d3.quantile(t,.5),d3.quantile(t,.75)]}function n(t){return t.ranges}function a(t){return t.markers}function e(t){return t.measures}function i(t){return function(r){return"translate("+t(r)+",0)"}}function o(t){var r=t(0);return function(n){return Math.abs(t(n)-r)}}function u(t){return t[0]}function s(t){return t[1]}function c(t,r){var n=r.length-1;return r=r.slice().sort(d3.ascending),d3.range(t).map(function(a){return r[~~(a*n/t)]})}function l(t){return t.x}function d(t){return t.y}d3.chart={},d3.chart.box=function(){function n(t){t.each(function(t,r){t=t.map(u).sort(d3.ascending);var n=d3.select(this),d=t.length,g=t[0],h=t[d-1],y=t.quartiles=c(t),f=s&&s.call(this,t,r),m=f&&f.map(function(r){return t[r]}),p=f?d3.range(0,f[0]).concat(d3.range(f[1]+1,d)):d3.range(d),x=d3.scale.linear().domain(o&&o.call(this,t,r)||[g,h]).range([e,0]),v=this.__chart__||d3.scale.linear().domain([0,1/0]).range(x.range());this.__chart__=x;var _=n.selectAll("line.center").data(m?[m]:[]);_.enter().insert("svg:line","rect").attr("class","center").attr("x1",a/2).attr("y1",function(t){return v(t[0])}).attr("x2",a/2).attr("y2",function(t){return v(t[1])}).style("opacity",1e-6).transition().duration(i).style("opacity",1).attr("y1",function(t){return x(t[0])}).attr("y2",function(t){return x(t[1])}),_.transition().duration(i).style("opacity",1).attr("y1",function(t){return x(t[0])}).attr("y2",function(t){return x(t[1])}),_.exit().transition().duration(i).style("opacity",1e-6).attr("y1",function(t){return x(t[0])}).attr("y2",function(t){return x(t[1])}).remove();var k=n.selectAll("rect.box").data([y]);k.enter().append("svg:rect").attr("class","box").attr("x",0).attr("y",function(t){return v(t[2])}).attr("width",a).attr("height",function(t){return v(t[0])-v(t[2])}).transition().duration(i).attr("y",function(t){return x(t[2])}).attr("height",function(t){return x(t[0])-x(t[2])}),k.transition().duration(i).attr("y",function(t){return x(t[2])}).attr("height",function(t){return x(t[0])-x(t[2])});var w=n.selectAll("line.median").data([y[1]]);w.enter().append("svg:line").attr("class","median").attr("x1",0).attr("y1",v).attr("x2",a).attr("y2",v).transition().duration(i).attr("y1",x).attr("y2",x),w.transition().duration(i).attr("y1",x).attr("y2",x);var A=n.selectAll("line.whisker").data(m||[]);A.enter().insert("svg:line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",v).attr("x2",a).attr("y2",v).style("opacity",1e-6).transition().duration(i).attr("y1",x).attr("y2",x).style("opacity",1),A.transition().duration(i).attr("y1",x).attr("y2",x).style("opacity",1),A.exit().transition().duration(i).attr("y1",x).attr("y2",x).style("opacity",1e-6).remove();var b=n.selectAll("circle.outlier").data(p,Number);b.enter().insert("svg:circle","text").attr("class","outlier").attr("r",5).attr("cx",a/2).attr("cy",function(r){return v(t[r])}).style("opacity",1e-6).transition().duration(i).attr("cy",function(r){return x(t[r])}).style("opacity",1),b.transition().duration(i).attr("cy",function(r){return x(t[r])}).style("opacity",1),b.exit().transition().duration(i).attr("cy",function(r){return x(t[r])}).style("opacity",1e-6).remove();var q=l||x.tickFormat(8),F=n.selectAll("text.box").data(y);F.enter().append("svg:text").attr("class","box").attr("dy",".3em").attr("dx",function(t,r){return 1&r?6:-6}).attr("x",function(t,r){return 1&r?a:0}).attr("y",v).attr("text-anchor",function(t,r){return 1&r?"start":"end"}).text(q).transition().duration(i).attr("y",x),F.transition().duration(i).text(q).attr("y",x);var z=n.selectAll("text.whisker").data(m||[]);z.enter().append("svg:text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",a).attr("y",v).text(q).style("opacity",1e-6).transition().duration(i).attr("y",x).style("opacity",1),z.transition().duration(i).text(q).attr("y",x).style("opacity",1),z.exit().transition().duration(i).attr("y",x).style("opacity",1e-6).remove()}),d3.timer.flush()}var a=1,e=1,i=0,o=null,u=Number,s=t,c=r,l=null;return n.width=function(t){return arguments.length?(a=t,n):a},n.height=function(t){return arguments.length?(e=t,n):e},n.tickFormat=function(t){return arguments.length?(l=t,n):l},n.duration=function(t){return arguments.length?(i=t,n):i},n.domain=function(t){return arguments.length?(o=null==t?t:d3.functor(t),n):o},n.value=function(t){return arguments.length?(u=t,n):u},n.whiskers=function(t){return arguments.length?(s=t,n):s},n.quartiles=function(t){return arguments.length?(c=t,n):c},n},d3.chart.bullet=function(){function t(t){t.each(function(t,r){var n=c.call(this,t,r).slice().sort(d3.descending),a=l.call(this,t,r).slice().sort(d3.descending),e=d.call(this,t,r).slice().sort(d3.descending),f=d3.select(this),m=d3.scale.linear().domain([0,Math.max(n[0],a[0],e[0])]).range(u?[g,0]:[0,g]),p=this.__chart__||d3.scale.linear().domain([0,1/0]).range(m.range());this.__chart__=m;var x=o(p),v=o(m),_=f.selectAll("rect.range").data(n);_.enter().append("svg:rect").attr("class",function(t,r){return"range s"+r}).attr("width",x).attr("height",h).attr("x",u?p:0).transition().duration(s).attr("width",v).attr("x",u?m:0),_.transition().duration(s).attr("x",u?m:0).attr("width",v).attr("height",h);var k=f.selectAll("rect.measure").data(e);k.enter().append("svg:rect").attr("class",function(t,r){return"measure s"+r}).attr("width",x).attr("height",h/3).attr("x",u?p:0).attr("y",h/3).transition().duration(s).attr("width",v).attr("x",u?m:0),k.transition().duration(s).attr("width",v).attr("height",h/3).attr("x",u?m:0).attr("y",h/3);var w=f.selectAll("line.marker").data(a);w.enter().append("svg:line").attr("class","marker").attr("x1",p).attr("x2",p).attr("y1",h/6).attr("y2",5*h/6).transition().duration(s).attr("x1",m).attr("x2",m),w.transition().duration(s).attr("x1",m).attr("x2",m).attr("y1",h/6).attr("y2",5*h/6);var A=y||m.tickFormat(8),b=f.selectAll("g.tick").data(m.ticks(8),function(t){return this.textContent||A(t)}),q=b.enter().append("svg:g").attr("class","tick").attr("transform",i(p)).style("opacity",1e-6);q.append("svg:line").attr("y1",h).attr("y2",7*h/6),q.append("svg:text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*h/6).text(A),q.transition().duration(s).attr("transform",i(m)).style("opacity",1);var F=b.transition().duration(s).attr("transform",i(m)).style("opacity",1);F.select("line").attr("y1",h).attr("y2",7*h/6),F.select("text").attr("y",7*h/6),b.exit().transition().duration(s).attr("transform",i(m)).style("opacity",1e-6).remove()}),d3.timer.flush()}var r="left",u=!1,s=0,c=n,l=a,d=e,g=380,h=30,y=null;return t.orient=function(n){return arguments.length?(r=n,u="right"==r||"bottom"==r,t):r},t.ranges=function(r){return arguments.length?(c=r,t):c},t.markers=function(r){return arguments.length?(l=r,t):l},t.measures=function(r){return arguments.length?(d=r,t):d},t.width=function(r){return arguments.length?(g=r,t):g},t.height=function(r){return arguments.length?(h=r,t):h},t.tickFormat=function(r){return arguments.length?(y=r,t):y},t.duration=function(r){return arguments.length?(s=r,t):s},t},d3.chart.horizon=function(){function t(t){t.each(function(t,u){var s,y,f,m=d3.select(this),p=1/0,x=-(1/0),v=-(1/0),_=t.map(function(t,r){var n=e.call(this,t,r),a=i.call(this,t,r);return p>n&&(p=n),n>x&&(x=n),-a>v&&(v=-a),a>v&&(v=a),[n,a]}),k=d3.scale.linear().domain([p,x]).range([0,o]),w=d3.scale.linear().domain([0,v]).range([0,c*r]);this.__chart__?(s=this.__chart__.x,y=this.__chart__.y,f=this.__chart__.id):(s=d3.scale.linear().domain([0,1/0]).range(k.range()),y=d3.scale.linear().domain([0,1/0]).range(w.range()),f=++h);var A=m.selectAll("defs").data([_]),b=A.enter().append("svg:defs");b.append("svg:clipPath").attr("id","d3_chart_horizon_clip"+f).append("svg:rect").attr("width",o).attr("height",c),A.select("rect").transition().duration(l).attr("width",o).attr("height",c),b.append("svg:path").attr("id","d3_chart_horizon_path"+f).attr("d",g.interpolate(a).x(function(t){return s(t[0])}).y0(c*r).y1(function(t){return c*r-y(t[1])})).transition().duration(l).attr("d",g.x(function(t){return k(t[0])}).y1(function(t){return c*r-w(t[1])})),A.select("path").transition().duration(l).attr("d",g),m.selectAll("g").data([null]).enter().append("svg:g").attr("clip-path","url(#d3_chart_horizon_clip"+f+")");var q="offset"==n?function(t){return"translate(0,"+(t+(0>t)-r)*c+")"}:function(t){return(0>t?"scale(1,-1)":"")+"translate(0,"+(t-r)*c+")"},F=m.select("g").selectAll("use").data(d3.range(-1,-r-1,-1).concat(d3.range(1,r+1)),Number);F.enter().append("svg:use").attr("xlink:href","#d3_chart_horizon_path"+f).attr("transform",function(t){return q(t+(t>0?1:-1))}).style("fill",d).transition().duration(l).attr("transform",q),F.transition().duration(l).attr("transform",q).style("fill",d),F.exit().transition().duration(l).attr("transform",q).remove(),this.__chart__={x:k,y:w,id:f}}),d3.timer.flush()}var r=1,n="offset",a="linear",e=u,i=s,o=960,c=40,l=0,d=d3.scale.linear().domain([-1,0,1]).range(["#d62728","#fff","#1f77b4"]);return t.duration=function(r){return arguments.length?(l=+r,t):l},t.bands=function(n){return arguments.length?(r=+n,d.domain([-r,0,r]),t):r},t.mode=function(r){return arguments.length?(n=r+"",t):n},t.colors=function(r){return arguments.length?(d.range(r),t):d.range()},t.interpolate=function(r){return arguments.length?(a=r+"",t):a},t.x=function(r){return arguments.length?(e=r,t):e},t.y=function(r){return arguments.length?(i=r,t):i},t.width=function(r){return arguments.length?(o=+r,t):o},t.height=function(r){return arguments.length?(c=+r,t):c},t};var g=d3.svg.area(),h=0;d3.chart.qq=function(){function t(t){t.each(function(t,l){var d,g,h=d3.select(this),y=c(o,u.call(this,t,l)),f=c(o,s.call(this,t,l)),m=e&&e.call(this,t,l)||[d3.min(y),d3.max(y)],p=e&&e.call(this,t,l)||[d3.min(f),d3.max(f)],x=d3.scale.linear().domain(m).range([0,r]),v=d3.scale.linear().domain(p).range([n,0]);this.__chart__?(d=this.__chart__.x,g=this.__chart__.y):(d=d3.scale.linear().domain([0,1/0]).range(x.range()),g=d3.scale.linear().domain([0,1/0]).range(v.range())),this.__chart__={x:x,y:v};var _=h.selectAll("line.diagonal").data([null]);_.enter().append("svg:line").attr("class","diagonal").attr("x1",x(p[0])).attr("y1",v(m[0])).attr("x2",x(p[1])).attr("y2",v(m[1])),_.transition().duration(a).attr("x1",x(p[0])).attr("y1",v(m[0])).attr("x2",x(p[1])).attr("y2",v(m[1]));var k=h.selectAll("circle").data(d3.range(o).map(function(t){return{x:y[t],y:f[t]}}));k.enter().append("svg:circle").attr("class","quantile").attr("r",4.5).attr("cx",function(t){return d(t.x)}).attr("cy",function(t){return g(t.y)}).style("opacity",1e-6).transition().duration(a).attr("cx",function(t){return x(t.x)}).attr("cy",function(t){return v(t.y)}).style("opacity",1),k.transition().duration(a).attr("cx",function(t){return x(t.x)}).attr("cy",function(t){return v(t.y)}).style("opacity",1),k.exit().transition().duration(a).attr("cx",function(t){return x(t.x)}).attr("cy",function(t){return v(t.y)}).style("opacity",1e-6).remove();var w=i||x.tickFormat(4),A=i||v.tickFormat(4),b=function(t){return"translate("+x(t)+","+n+")"},q=function(t){return"translate(0,"+v(t)+")"},F=h.selectAll("g.x.tick").data(x.ticks(4),function(t){return this.textContent||w(t)}),z=F.enter().append("svg:g").attr("class","x tick").attr("transform",function(t){return"translate("+d(t)+","+n+")"}).style("opacity",1e-6);z.append("svg:line").attr("y1",0).attr("y2",-6),z.append("svg:text").attr("text-anchor","middle").attr("dy","1em").text(w),z.transition().duration(a).attr("transform",b).style("opacity",1),F.transition().duration(a).attr("transform",b).style("opacity",1),F.exit().transition().duration(a).attr("transform",b).style("opacity",1e-6).remove();var C=h.selectAll("g.y.tick").data(v.ticks(4),function(t){return this.textContent||A(t)}),N=C.enter().append("svg:g").attr("class","y tick").attr("transform",function(t){return"translate(0,"+g(t)+")"}).style("opacity",1e-6);N.append("svg:line").attr("x1",0).attr("x2",6),N.append("svg:text").attr("text-anchor","end").attr("dx","-.5em").attr("dy",".3em").text(A),N.transition().duration(a).attr("transform",q).style("opacity",1),C.transition().duration(a).attr("transform",q).style("opacity",1),C.exit().transition().duration(a).attr("transform",q).style("opacity",1e-6).remove()})}var r=1,n=1,a=0,e=null,i=null,o=100,u=l,s=d;return t.width=function(n){return arguments.length?(r=n,t):r},t.height=function(r){return arguments.length?(n=r,t):n},t.duration=function(r){return arguments.length?(a=r,t):a},t.domain=function(r){return arguments.length?(e=null==r?r:d3.functor(r),t):e},t.count=function(r){return arguments.length?(o=r,t):o},t.x=function(r){return arguments.length?(u=r,t):u},t.y=function(r){return arguments.length?(s=r,t):s},t.tickFormat=function(r){return arguments.length?(i=r,t):i},t}}();